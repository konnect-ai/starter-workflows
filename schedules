name: Schedules

on:
  schedule:
    # Tous les lundis Ã  09:00 CET (CEST/GMT+2)
    - cron:  '0 7 * * 1'
    # Tous les jours Ã  08:00 CET
    - cron:  '6 6 * * *'
    # Tous les vendredis Ã  18:00 CET
    - cron:  '16 16 * * 5'

jobs:
  weekly_tasks:
    runs-on: ubuntu-latest
    env:
      WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }} 
    steps:
      - name: Rappel hebdo tÃ¢ches Ã  faire & continuer
        run: |
          curl -X POST "$WEBHOOK_URL" \
            -H "Content-Type: application/json" \
            -d '{
              "type": "confirmation",
              "cmd": "All",
              "content": "ðŸ”„ TÃ¢ches Ã  faire & Ã  continuer â€“ pensez Ã  mettre Ã  jour vos blocs"
            }'
  daily_koko:
    runs-on: ubuntu-latest
    env:
      WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
    steps:
      - name: Rappel quotidien KOKO 
        run: |
          curl -X POST "$WEBHOOK_URL" \
            -H "Content-Type: application/json" \
            -d '{
              "type": "confirmation",
              "cmd": "All",
              "content": "ðŸ”” KOKO : votre briefing matinal est prÃªt !"
            }'
  weekly_backup:
    runs-on: ubuntu-latest
    env:
      WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
    steps:
      - name: Rappel backup hebdo
        run: |
          curl -X POST "$WEBHOOK_URL" \
            -H "Content-Type: application/json" \
            -d '{
              "type": "confirmation",
              "cmd": "Automate",
              "content": "ðŸ’¾ Nâ€™oubliez pas le backup mensuel !"
            }'
